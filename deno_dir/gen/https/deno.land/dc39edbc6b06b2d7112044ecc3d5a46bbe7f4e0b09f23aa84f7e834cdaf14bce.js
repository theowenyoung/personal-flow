import { runScript } from "./utils/run-script.ts";
export async function runPost(ctx, step) {
    const { reporter } = step;
    if (step.post) {
        try {
            const scriptResult = await runScript(step.post, {
                ctx: ctx.public,
            });
            ctx.public.state = scriptResult.ctx.state;
        }
        catch (e) {
            reporter.warning(`Failed to run post script code`);
            throw new Error(e);
        }
    }
    return ctx;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicnVuLXBvc3QuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJydW4tcG9zdC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFHQSxPQUFPLEVBQUUsU0FBUyxFQUFFLE1BQU0sdUJBQXVCLENBQUM7QUFNbEQsTUFBTSxDQUFDLEtBQUssVUFBVSxPQUFPLENBQzNCLEdBQVksRUFDWixJQUFtQjtJQUVuQixNQUFNLEVBQUUsUUFBUSxFQUFFLEdBQUcsSUFBSSxDQUFDO0lBRTFCLElBQUksSUFBSSxDQUFDLElBQUksRUFBRTtRQUViLElBQUk7WUFDRixNQUFNLFlBQVksR0FBRyxNQUFNLFNBQVMsQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFO2dCQUM5QyxHQUFHLEVBQUUsR0FBRyxDQUFDLE1BQU07YUFDaEIsQ0FBQyxDQUFDO1lBQ0gsR0FBRyxDQUFDLE1BQU0sQ0FBQyxLQUFLLEdBQUcsWUFBWSxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUM7U0FDM0M7UUFBQyxPQUFPLENBQUMsRUFBRTtZQUNWLFFBQVEsQ0FBQyxPQUFPLENBQ2QsZ0NBQWdDLENBQ2pDLENBQUM7WUFDRixNQUFNLElBQUksS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDO1NBQ3BCO0tBQ0Y7SUFDRCxPQUFPLEdBQUcsQ0FBQztBQUNiLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBTdGVwT3B0aW9ucyB9IGZyb20gXCIuL2ludGVyZmFjZS50c1wiO1xuaW1wb3J0IHsgQ29udGV4dCB9IGZyb20gXCIuL2ludGVybmFsLWludGVyZmFjZS50c1wiO1xuaW1wb3J0IHsgbG9nIH0gZnJvbSBcIi4uL2RlcHMudHNcIjtcbmltcG9ydCB7IHJ1blNjcmlwdCB9IGZyb20gXCIuL3V0aWxzL3J1bi1zY3JpcHQudHNcIjtcblxuaW50ZXJmYWNlIFJ1blN0ZXBPcHRpb24gZXh0ZW5kcyBTdGVwT3B0aW9ucyB7XG4gIHJlcG9ydGVyOiBsb2cuTG9nZ2VyO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcnVuUG9zdChcbiAgY3R4OiBDb250ZXh0LFxuICBzdGVwOiBSdW5TdGVwT3B0aW9uLFxuKTogUHJvbWlzZTxDb250ZXh0PiB7XG4gIGNvbnN0IHsgcmVwb3J0ZXIgfSA9IHN0ZXA7XG4gIC8vIGNoZWNrIGlmIHBvc3RcbiAgaWYgKHN0ZXAucG9zdCkge1xuICAgIC8vIHJ1biBwb3N0XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHNjcmlwdFJlc3VsdCA9IGF3YWl0IHJ1blNjcmlwdChzdGVwLnBvc3QsIHtcbiAgICAgICAgY3R4OiBjdHgucHVibGljLFxuICAgICAgfSk7XG4gICAgICBjdHgucHVibGljLnN0YXRlID0gc2NyaXB0UmVzdWx0LmN0eC5zdGF0ZTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICByZXBvcnRlci53YXJuaW5nKFxuICAgICAgICBgRmFpbGVkIHRvIHJ1biBwb3N0IHNjcmlwdCBjb2RlYCxcbiAgICAgICk7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoZSk7XG4gICAgfVxuICB9XG4gIHJldHVybiBjdHg7XG59XG4iXX0=